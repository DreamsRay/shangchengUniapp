(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"064e":function(t,e,n){"use strict";n.r(e);var o=n("1b0f"),r=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=r.a},"1b0f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(n("15d0"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("1e07"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/empty").then(function(){return resolve(n("ec02"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/order-button").then(function(){return resolve(n("da00"))}.bind(null,n)).catch(n.oe)},u={components:{uniLoadMore:r,empty:a,orderBtn:i},computed:{status:function(){return this.navList[this.tabCurrentIndex].next?"more":"noMore"}},data:function(){return{tabCurrentIndex:null,navList:[{state:0,text:"全部",filter:"",loadingType:"more",orderList:[],next:null},{state:1,text:"待付款",filter:"unpaid",loadingType:"more",orderList:[],next:null},{state:2,text:"待收货",filter:"paid",loadingType:"more",orderList:[],next:null},{state:3,text:"已完成",filter:"delivered",loadingType:"more",orderList:[],next:null},{state:4,text:"已关闭",filter:"close",loadingType:"more",orderList:[],next:null}]}},onLoad:function(){this.tabCurrentIndex=0,this.loadData()},onShow:function(){this.loadData()},methods:{loadMore:function(){var t=this,e=this.tabCurrentIndex,n=this.navList[e];0==n.orderList.length?this.loadData():n.next&&this.$requests.page(n.next).then((function(e){e.next?t.next=e.next:t.next=null,e.results.forEach((function(e){e.order_goods.forEach((function(t){sum+=t.amount})),e["sum"]=sum,t.navItem.orderList.push(e)}))}))},returnDate:function(t){t.success,this.$api.msg(t.msg),this.loadData()},loadData:function(){var t=this,e=this.tabCurrentIndex,n=this.navList[e],o=n.filter;"loading"!==n.loadingType&&(n.loadingType="loading",this.$api.payment.getOrders(o).then((function(e){console.log(e),n.loadingType="loaded",n.orderList=e.results,n.orderList.map((function(t){var e=0;t.order_goods.forEach((function(t){e+=t.amount})),t["sum"]=e})),n.loaded=!0,e.next?t.next=e.next:t.next=null})))},goDetail:function(e){t.navigateTo({url:"/pages/order/orderDetail?id="+e})},changeTab:function(t){this.tabCurrentIndex=t.target.current,this.loadData()},tabClick:function(t){this.tabCurrentIndex=t,this.loadData()},orderStateExp:function(t){var e="",n="#fa436a";switch(+t){case 1:e="待付款";break;case 2:e="待发货";break;case 9:e="订单已关闭",n="#909399";break}return{stateTip:e,stateTipColor:n}}}};e.default=u}).call(this,n("543d")["default"])},"2afb":function(t,e,n){"use strict";var o={"uni-load-more":function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"1e07"))}},r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.navList,(function(e,n){var o=t.__map(e.orderList,(function(e,n){var o=parseFloat(e.money),r=parseFloat(e.freight);return{$orig:t.__get_orig(e),m0:o,m1:r}}));return{$orig:t.__get_orig(e),l0:o}})));t.$mp.data=Object.assign({},{$root:{l1:n}})},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}))},8109:function(t,e,n){"use strict";(function(t){n("aead"),n("921b");o(n("66fd"));var e=o(n("e0b5"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},dee9:function(t,e,n){"use strict";var o=n("e156"),r=n.n(o);r.a},e0b5:function(t,e,n){"use strict";n.r(e);var o=n("2afb"),r=n("064e");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("dee9");var i,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=s.exports},e156:function(t,e,n){}},[["8109","common/runtime","common/vendor"]]]);